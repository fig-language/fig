---
source: crates/fig-lexer/tests/integration_tests.rs
expression: tokens
---
- Using
- Core
- ColonColon
- Ident: memory
- Newline
- Const
- Ident: WINDOW_SIZE
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "4096"
    suffix: ~
- Newline
- Const
- Ident: LOOKAHEAD_SIZE
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "18"
    suffix: ~
- Newline
- Const
- Ident: MIN_MATCH_LENGTH
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "3"
    suffix: ~
- Newline
- Struct
- Ident: Match
- Newline
- Indent
- Ident: distance
- Colon
- USize
- Newline
- Ident: length
- Colon
- USize
- Newline
- Ident: literal
- Colon
- U8
- Newline
- Dedent
- Export
- Struct
- Ident: LZ77Compressor
- Newline
- Indent
- Ident: window
- Colon
- LBracket
- U8
- RBracket
- Newline
- Ident: window_pos
- Colon
- USize
- Newline
- Dedent
- Export
- Struct
- Ident: LZ77Decompressor
- Newline
- Indent
- Ident: output
- Colon
- LBracket
- U8
- RBracket
- Newline
- Ident: output_pos
- Colon
- USize
- Newline
- Dedent
- Func
- Bang
- Ident: LZ77Compressor
- ColonColon
- Ident: new
- LParen
- RParen
- Arrow
- Ident: LZ77Compressor
- Newline
- Indent
- Return
- Ident: LZ77Compressor
- LParen
- Newline
- Indent
- Ident: window
- Colon
- Ident: allocate_buffer
- LParen
- Ident: WINDOW_SIZE
- RParen
- Comma
- Newline
- Ident: window_pos
- Colon
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Dedent
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: LZ77Compressor
- ColonColon
- Ident: compress
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: input
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Mut
- Ident: compressed
- Colon
- LBracket
- U8
- RBracket
- Eq
- LBracket
- RBracket
- Newline
- Mut
- Ident: pos
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: input
- Dot
- Ident: len
- RParen
- Newline
- Indent
- If
- Ident: pos
- Ge
- Ident: input
- Dot
- Ident: len
- Newline
- Indent
- Break
- Newline
- Dedent
- Let
- Match
- Eq
- SelfLower
- Dot
- Ident: find_longest_match
- LParen
- And
- Ident: input
- LBracket
- Ident: pos
- RBracket
- Comma
- Ident: input
- Dot
- Ident: len
- Minus
- Ident: pos
- RParen
- Newline
- If
- Match
- Dot
- Ident: length
- Ge
- Ident: MIN_MATCH_LENGTH
- Newline
- Indent
- Ident: compressed
- Dot
- Ident: push
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Newline
- Ident: compressed
- Dot
- Ident: push
- LParen
- LParen
- Match
- Dot
- Ident: distance
- Shr
- IntegerLiteral:
    base: Decimal
    digits: "8"
    suffix: ~
- RParen
- As
- U8
- RParen
- Newline
- Ident: compressed
- Dot
- Ident: push
- LParen
- LParen
- Match
- Dot
- Ident: distance
- And
- IntegerLiteral:
    base: Decimal
    digits: "255"
    suffix: ~
- RParen
- As
- U8
- RParen
- Newline
- Ident: compressed
- Dot
- Ident: push
- LParen
- Match
- Dot
- Ident: length
- As
- U8
- RParen
- Newline
- For
- Ident: j
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Match
- Dot
- Ident: length
- RParen
- Newline
- Indent
- SelfLower
- Dot
- Ident: add_to_window
- LParen
- Ident: input
- LBracket
- Ident: pos
- Plus
- Ident: j
- RBracket
- RParen
- Newline
- Dedent
- Ident: pos
- Eq
- Ident: pos
- Plus
- Match
- Dot
- Ident: length
- Newline
- Dedent
- Else
- Newline
- Indent
- Ident: compressed
- Dot
- Ident: push
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RParen
- Newline
- Ident: compressed
- Dot
- Ident: push
- LParen
- Ident: input
- LBracket
- Ident: pos
- RBracket
- RParen
- Newline
- SelfLower
- Dot
- Ident: add_to_window
- LParen
- Ident: input
- LBracket
- Ident: pos
- RBracket
- RParen
- Newline
- Ident: pos
- Eq
- Ident: pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- Dedent
- Return
- Ident: compressed
- Newline
- Dedent
- Func
- Bang
- Ident: LZ77Compressor
- ColonColon
- Ident: find_longest_match
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: lookahead
- Colon
- LBracket
- U8
- RBracket
- Comma
- Ident: lookahead_len
- Colon
- USize
- RParen
- Arrow
- Ident: Match
- Newline
- Indent
- Mut
- Ident: best_length
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Mut
- Ident: best_distance
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Let
- Ident: max_len
- Eq
- If
- Ident: lookahead_len
- Lt
- Ident: LOOKAHEAD_SIZE
- Ident: then
- Ident: lookahead_len
- Else
- Ident: LOOKAHEAD_SIZE
- Newline
- For
- Ident: dist
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Comma
- Ident: WINDOW_SIZE
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Newline
- Indent
- If
- Ident: dist
- Gt
- SelfLower
- Dot
- Ident: window_pos
- Newline
- Indent
- Break
- Newline
- Dedent
- Let
- Ident: window_start
- Eq
- SelfLower
- Dot
- Ident: window_pos
- Minus
- Ident: dist
- Newline
- Mut
- Ident: match_len
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: max_len
- RParen
- Newline
- Indent
- Let
- Ident: window_idx
- Eq
- LParen
- Ident: window_start
- Plus
- Ident: i
- RParen
- Percent
- Ident: WINDOW_SIZE
- Newline
- If
- SelfLower
- Dot
- Ident: window
- LBracket
- Ident: window_idx
- RBracket
- Ne
- Ident: lookahead
- LBracket
- Ident: i
- RBracket
- Newline
- Indent
- Break
- Newline
- Dedent
- Ident: match_len
- Eq
- Ident: match_len
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- If
- Ident: match_len
- Gt
- Ident: best_length
- Newline
- Indent
- Ident: best_length
- Eq
- Ident: match_len
- Newline
- Ident: best_distance
- Eq
- Ident: dist
- Newline
- Dedent
- Dedent
- Let
- Ident: literal
- Eq
- If
- Ident: lookahead_len
- Gt
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Ident: then
- Ident: lookahead
- LBracket
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RBracket
- Else
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Return
- Ident: Match
- LParen
- Newline
- Indent
- Ident: distance
- Colon
- Ident: best_distance
- Comma
- Newline
- Ident: length
- Colon
- Ident: best_length
- Comma
- Newline
- Ident: literal
- Colon
- Ident: literal
- Newline
- Dedent
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: LZ77Compressor
- ColonColon
- Ident: add_to_window
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: byte
- Colon
- U8
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- SelfLower
- Dot
- Ident: window
- LBracket
- SelfLower
- Dot
- Ident: window_pos
- Percent
- Ident: WINDOW_SIZE
- RBracket
- Eq
- Ident: byte
- Newline
- SelfLower
- Dot
- Ident: window_pos
- Eq
- SelfLower
- Dot
- Ident: window_pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: LZ77Decompressor
- ColonColon
- Ident: new
- LParen
- RParen
- Arrow
- Ident: LZ77Decompressor
- Newline
- Indent
- Return
- Ident: LZ77Decompressor
- LParen
- Newline
- Indent
- Ident: output
- Colon
- LBracket
- RBracket
- Comma
- Newline
- Ident: output_pos
- Colon
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Dedent
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: LZ77Decompressor
- ColonColon
- Ident: decompress
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: compressed
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Mut
- Ident: pos
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: compressed
- Dot
- Ident: len
- RParen
- Newline
- Indent
- If
- Ident: pos
- Ge
- Ident: compressed
- Dot
- Ident: len
- Newline
- Indent
- Break
- Newline
- Dedent
- Let
- Ident: flag
- Eq
- Ident: compressed
- LBracket
- Ident: pos
- RBracket
- Newline
- Ident: pos
- Eq
- Ident: pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- If
- Ident: flag
- EqEq
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Indent
- Let
- Ident: distance_high
- Eq
- Ident: compressed
- LBracket
- Ident: pos
- RBracket
- As
- USize
- Newline
- Ident: pos
- Eq
- Ident: pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Let
- Ident: distance_low
- Eq
- Ident: compressed
- LBracket
- Ident: pos
- RBracket
- As
- USize
- Newline
- Ident: pos
- Eq
- Ident: pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Let
- Ident: distance
- Eq
- LParen
- Ident: distance_high
- Shl
- IntegerLiteral:
    base: Decimal
    digits: "8"
    suffix: ~
- RParen
- Or
- Ident: distance_low
- Newline
- Let
- Ident: length
- Eq
- Ident: compressed
- LBracket
- Ident: pos
- RBracket
- As
- USize
- Newline
- Ident: pos
- Eq
- Ident: pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Let
- Ident: copy_start
- Eq
- SelfLower
- Dot
- Ident: output_pos
- Minus
- Ident: distance
- Newline
- For
- Ident: j
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: length
- RParen
- Newline
- Indent
- Let
- Ident: byte
- Eq
- SelfLower
- Dot
- Ident: output
- LBracket
- Ident: copy_start
- Plus
- Ident: j
- RBracket
- Newline
- SelfLower
- Dot
- Ident: output
- Dot
- Ident: push
- LParen
- Ident: byte
- RParen
- Newline
- SelfLower
- Dot
- Ident: output_pos
- Eq
- SelfLower
- Dot
- Ident: output_pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- Dedent
- Else
- Newline
- Indent
- Let
- Ident: literal
- Eq
- Ident: compressed
- LBracket
- Ident: pos
- RBracket
- Newline
- Ident: pos
- Eq
- Ident: pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- SelfLower
- Dot
- Ident: output
- Dot
- Ident: push
- LParen
- Ident: literal
- RParen
- Newline
- SelfLower
- Dot
- Ident: output_pos
- Eq
- SelfLower
- Dot
- Ident: output_pos
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- Dedent
- Return
- SelfLower
- Dot
- Ident: output
- Newline
- Dedent
- Struct
- Ident: HuffmanNode
- Newline
- Indent
- Ident: symbol
- Colon
- U8
- Newline
- Ident: frequency
- Colon
- USize
- Newline
- Ident: left
- Colon
- Question
- Star
- Mut
- Ident: HuffmanNode
- Newline
- Ident: right
- Colon
- Question
- Star
- Mut
- Ident: HuffmanNode
- Newline
- Ident: is_leaf
- Colon
- Bool
- Newline
- Dedent
- Export
- Struct
- Ident: HuffmanEncoder
- Newline
- Indent
- Ident: root
- Colon
- Question
- Star
- Mut
- Ident: HuffmanNode
- Newline
- Ident: code_table
- Colon
- LBracket
- Ident: HuffmanCode
- RBracket
- Newline
- Dedent
- Struct
- Ident: HuffmanCode
- Newline
- Indent
- Ident: symbol
- Colon
- U8
- Newline
- Ident: code
- Colon
- U64
- Newline
- Ident: length
- Colon
- USize
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanEncoder
- ColonColon
- Ident: new
- LParen
- RParen
- Arrow
- Ident: HuffmanEncoder
- Newline
- Indent
- Return
- Ident: HuffmanEncoder
- LParen
- Newline
- Indent
- Ident: root
- Colon
- "Null"
- Comma
- Newline
- Ident: code_table
- Colon
- LBracket
- RBracket
- Newline
- Dedent
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanEncoder
- ColonColon
- Ident: build_tree
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: data
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- Mut
- Ident: frequencies
- Colon
- LBracket
- USize
- RBracket
- Eq
- Ident: allocate_array
- LBracket
- USize
- RBracket
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "256"
    suffix: ~
- RParen
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: data
- Dot
- Ident: len
- RParen
- Newline
- Indent
- Let
- Ident: byte
- Eq
- Ident: data
- LBracket
- Ident: i
- RBracket
- Newline
- Ident: frequencies
- LBracket
- Ident: byte
- As
- USize
- RBracket
- Eq
- Ident: frequencies
- LBracket
- Ident: byte
- As
- USize
- RBracket
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- Mut
- Ident: nodes
- Colon
- LBracket
- Star
- Mut
- Ident: HuffmanNode
- RBracket
- Eq
- LBracket
- RBracket
- Newline
- For
- Ident: symbol
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "256"
    suffix: ~
- RParen
- Newline
- Indent
- If
- Ident: frequencies
- LBracket
- Ident: symbol
- RBracket
- Gt
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Indent
- Let
- Ident: node
- Eq
- Ident: HuffmanNode
- ColonColon
- Ident: new_leaf
- LParen
- Ident: symbol
- As
- U8
- Comma
- Ident: frequencies
- LBracket
- Ident: symbol
- RBracket
- RParen
- Newline
- Ident: nodes
- Dot
- Ident: push
- LParen
- Ident: node
- RParen
- Newline
- Dedent
- Dedent
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: nodes
- Dot
- Ident: len
- Minus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Newline
- Indent
- Ident: nodes
- Dot
- Ident: sort_by_frequency
- LParen
- RParen
- Newline
- Let
- Ident: left
- Eq
- Ident: nodes
- LBracket
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RBracket
- Newline
- Let
- Ident: right
- Eq
- Ident: nodes
- LBracket
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RBracket
- Newline
- Let
- Ident: parent
- Eq
- Ident: HuffmanNode
- ColonColon
- Ident: new_internal
- LParen
- Ident: left
- Dot
- Ident: frequency
- Plus
- Ident: right
- Dot
- Ident: frequency
- Comma
- Ident: left
- Comma
- Ident: right
- RParen
- Newline
- Ident: nodes
- Dot
- Ident: remove
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RParen
- Newline
- Ident: nodes
- Dot
- Ident: remove
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RParen
- Newline
- Ident: nodes
- Dot
- Ident: push
- LParen
- Ident: parent
- RParen
- Newline
- Dedent
- If
- Ident: nodes
- Dot
- Ident: len
- Gt
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Indent
- SelfLower
- Dot
- Ident: root
- Eq
- Ident: nodes
- LBracket
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RBracket
- Newline
- Dedent
- SelfLower
- Dot
- Ident: build_code_table
- LParen
- RParen
- Newline
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanEncoder
- ColonColon
- Ident: build_code_table
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- If
- SelfLower
- Dot
- Ident: root
- EqEq
- "Null"
- Newline
- Indent
- Return
- OkLiteral
- Newline
- Dedent
- SelfLower
- Dot
- Ident: build_codes
- LParen
- SelfLower
- Dot
- Ident: root
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RParen
- Newline
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanEncoder
- ColonColon
- Ident: build_codes
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: node
- Colon
- Star
- Mut
- Ident: HuffmanNode
- Comma
- Ident: code
- Colon
- U64
- Comma
- Ident: length
- Colon
- USize
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- If
- Ident: node
- Dot
- Ident: is_leaf
- Newline
- Indent
- Let
- Ident: huffman_code
- Eq
- Ident: HuffmanCode
- LParen
- Newline
- Indent
- Ident: symbol
- Colon
- Ident: node
- Dot
- Ident: symbol
- Comma
- Newline
- Ident: code
- Colon
- Ident: code
- Comma
- Newline
- Ident: length
- Colon
- Ident: length
- Newline
- Dedent
- RParen
- Newline
- SelfLower
- Dot
- Ident: code_table
- Dot
- Ident: push
- LParen
- Ident: huffman_code
- RParen
- Newline
- Dedent
- Else
- Newline
- Indent
- If
- Ident: node
- Dot
- Ident: left
- Ne
- "Null"
- Newline
- Indent
- SelfLower
- Dot
- Ident: build_codes
- LParen
- Ident: node
- Dot
- Ident: left
- Comma
- Ident: code
- Shl
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Comma
- Ident: length
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Newline
- Dedent
- If
- Ident: node
- Dot
- Ident: right
- Ne
- "Null"
- Newline
- Indent
- SelfLower
- Dot
- Ident: build_codes
- LParen
- Ident: node
- Dot
- Ident: right
- Comma
- LParen
- Ident: code
- Shl
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Or
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Comma
- Ident: length
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Newline
- Dedent
- Dedent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanEncoder
- ColonColon
- Ident: encode
- LParen
- Star
- SelfLower
- Comma
- Ident: data
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Mut
- Ident: encoded
- Colon
- LBracket
- U8
- RBracket
- Eq
- LBracket
- RBracket
- Newline
- Mut
- Ident: bit_buffer
- Colon
- U64
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Mut
- Ident: bit_count
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: data
- Dot
- Ident: len
- RParen
- Newline
- Indent
- Let
- Ident: byte
- Eq
- Ident: data
- LBracket
- Ident: i
- RBracket
- Newline
- Let
- Ident: code
- Eq
- SelfLower
- Dot
- Ident: find_code
- LParen
- Ident: byte
- RParen
- Newline
- If
- Ident: code
- Ne
- "Null"
- Newline
- Indent
- Ident: bit_buffer
- Eq
- LParen
- Ident: bit_buffer
- Shl
- Ident: code
- Dot
- Ident: length
- RParen
- Or
- Ident: code
- Dot
- Ident: code
- Newline
- Ident: bit_count
- Eq
- Ident: bit_count
- Plus
- Ident: code
- Dot
- Ident: length
- Newline
- For
- Ident: j
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "100"
    suffix: ~
- RParen
- Newline
- Indent
- If
- Ident: bit_count
- Lt
- IntegerLiteral:
    base: Decimal
    digits: "8"
    suffix: ~
- Newline
- Indent
- Break
- Newline
- Dedent
- Let
- Ident: output_byte
- Eq
- LParen
- Ident: bit_buffer
- Shr
- LParen
- Ident: bit_count
- Minus
- IntegerLiteral:
    base: Decimal
    digits: "8"
    suffix: ~
- RParen
- RParen
- As
- U8
- Newline
- Ident: encoded
- Dot
- Ident: push
- LParen
- Ident: output_byte
- RParen
- Newline
- Ident: bit_count
- Eq
- Ident: bit_count
- Minus
- IntegerLiteral:
    base: Decimal
    digits: "8"
    suffix: ~
- Newline
- Dedent
- Dedent
- Dedent
- If
- Ident: bit_count
- Gt
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Indent
- Let
- Ident: output_byte
- Eq
- LParen
- Ident: bit_buffer
- Shl
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "8"
    suffix: ~
- Minus
- Ident: bit_count
- RParen
- RParen
- As
- U8
- Newline
- Ident: encoded
- Dot
- Ident: push
- LParen
- Ident: output_byte
- RParen
- Newline
- Dedent
- Return
- Ident: encoded
- Newline
- Dedent
- Func
- Ident: HuffmanEncoder
- ColonColon
- Ident: find_code
- LParen
- Star
- SelfLower
- Comma
- Ident: symbol
- Colon
- U8
- RParen
- Arrow
- Question
- Star
- Ident: HuffmanCode
- Newline
- Indent
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- SelfLower
- Dot
- Ident: code_table
- Dot
- Ident: len
- RParen
- Newline
- Indent
- If
- SelfLower
- Dot
- Ident: code_table
- LBracket
- Ident: i
- RBracket
- Dot
- Ident: symbol
- EqEq
- Ident: symbol
- Newline
- Indent
- Return
- And
- SelfLower
- Dot
- Ident: code_table
- LBracket
- Ident: i
- RBracket
- Newline
- Dedent
- Dedent
- Return
- "Null"
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanNode
- ColonColon
- Ident: new_leaf
- LParen
- Ident: symbol
- Colon
- U8
- Comma
- Ident: frequency
- Colon
- USize
- RParen
- Arrow
- Star
- Mut
- Ident: HuffmanNode
- Newline
- Indent
- Let
- Ident: node
- Eq
- Ident: allocate
- LBracket
- Ident: HuffmanNode
- RBracket
- LParen
- RParen
- Newline
- Ident: node
- Dot
- Ident: symbol
- Eq
- Ident: symbol
- Newline
- Ident: node
- Dot
- Ident: frequency
- Eq
- Ident: frequency
- Newline
- Ident: node
- Dot
- Ident: left
- Eq
- "Null"
- Newline
- Ident: node
- Dot
- Ident: right
- Eq
- "Null"
- Newline
- Ident: node
- Dot
- Ident: is_leaf
- Eq
- "True"
- Newline
- Return
- Ident: node
- Newline
- Dedent
- Func
- Bang
- Ident: HuffmanNode
- ColonColon
- Ident: new_internal
- LParen
- Ident: frequency
- Colon
- USize
- Comma
- Ident: left
- Colon
- Star
- Mut
- Ident: HuffmanNode
- Comma
- Ident: right
- Colon
- Star
- Mut
- Ident: HuffmanNode
- RParen
- Arrow
- Star
- Mut
- Ident: HuffmanNode
- Newline
- Indent
- Let
- Ident: node
- Eq
- Ident: allocate
- LBracket
- Ident: HuffmanNode
- RBracket
- LParen
- RParen
- Newline
- Ident: node
- Dot
- Ident: symbol
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Ident: node
- Dot
- Ident: frequency
- Eq
- Ident: frequency
- Newline
- Ident: node
- Dot
- Ident: left
- Eq
- Ident: left
- Newline
- Ident: node
- Dot
- Ident: right
- Eq
- Ident: right
- Newline
- Ident: node
- Dot
- Ident: is_leaf
- Eq
- "False"
- Newline
- Return
- Ident: node
- Newline
- Dedent
- Export
- Struct
- Ident: RLEEncoder
- Newline
- Func
- Bang
- Ident: RLEEncoder
- ColonColon
- Ident: encode
- LParen
- Ident: data
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Mut
- Ident: encoded
- Colon
- LBracket
- U8
- RBracket
- Eq
- LBracket
- RBracket
- Newline
- If
- Ident: data
- Dot
- Ident: len
- EqEq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Indent
- Return
- Ident: encoded
- Newline
- Dedent
- Mut
- Ident: current_byte
- Eq
- Ident: data
- LBracket
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RBracket
- Newline
- Mut
- Ident: count
- Colon
- U8
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Comma
- Ident: data
- Dot
- Ident: len
- RParen
- Newline
- Indent
- If
- Ident: data
- LBracket
- Ident: i
- RBracket
- EqEq
- Ident: current_byte
- AndAnd
- Ident: count
- Lt
- IntegerLiteral:
    base: Decimal
    digits: "255"
    suffix: ~
- Newline
- Indent
- Ident: count
- Eq
- Ident: count
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- Else
- Newline
- Indent
- Ident: encoded
- Dot
- Ident: push
- LParen
- Ident: count
- RParen
- Newline
- Ident: encoded
- Dot
- Ident: push
- LParen
- Ident: current_byte
- RParen
- Newline
- Ident: current_byte
- Eq
- Ident: data
- LBracket
- Ident: i
- RBracket
- Newline
- Ident: count
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Dedent
- Dedent
- Ident: encoded
- Dot
- Ident: push
- LParen
- Ident: count
- RParen
- Newline
- Ident: encoded
- Dot
- Ident: push
- LParen
- Ident: current_byte
- RParen
- Newline
- Return
- Ident: encoded
- Newline
- Dedent
- Func
- Bang
- Ident: RLEEncoder
- ColonColon
- Ident: decode
- LParen
- Ident: encoded
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Mut
- Ident: decoded
- Colon
- LBracket
- U8
- RBracket
- Eq
- LBracket
- RBracket
- Newline
- Mut
- Ident: i
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- For
- Ident: idx
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: encoded
- Dot
- Ident: len
- Slash
- IntegerLiteral:
    base: Decimal
    digits: "2"
    suffix: ~
- RParen
- Newline
- Indent
- If
- Ident: i
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Ge
- Ident: encoded
- Dot
- Ident: len
- Newline
- Indent
- Break
- Newline
- Dedent
- Let
- Ident: count
- Eq
- Ident: encoded
- LBracket
- Ident: i
- RBracket
- Newline
- Let
- Ident: byte
- Eq
- Ident: encoded
- LBracket
- Ident: i
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RBracket
- Newline
- For
- Ident: j
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Ident: count
- As
- USize
- RParen
- Newline
- Indent
- Ident: decoded
- Dot
- Ident: push
- LParen
- Ident: byte
- RParen
- Newline
- Dedent
- Ident: i
- Eq
- Ident: i
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "2"
    suffix: ~
- Newline
- Dedent
- Return
- Ident: decoded
- Newline
- Dedent
- Func
- Bang
- Ident: allocate_buffer
- LParen
- Ident: size
- Colon
- USize
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: allocate_array
- LBracket
- Ident: T
- RBracket
- LParen
- Ident: size
- Colon
- USize
- RParen
- Arrow
- LBracket
- Ident: T
- RBracket
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: allocate
- LBracket
- Ident: T
- RBracket
- LParen
- RParen
- Arrow
- Star
- Mut
- Ident: T
- Newline
- Indent
- Pass
- Newline
- Dedent
