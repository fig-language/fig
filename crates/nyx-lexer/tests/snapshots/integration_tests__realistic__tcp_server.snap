---
source: crates/nyx-lexer/tests/integration_tests.rs
expression: tokens
---
- Newline
- Using
- Core
- Colon
- Colon
- Ident: memory
- Newline
- Using
- Std
- Colon
- Colon
- Ident: io
- Newline
- Const
- Ident: SOCKET_ERROR
- Colon
- I32
- Eq
- Minus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Const
- Ident: MAX_CONNECTIONS
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "128"
    suffix: ~
- Newline
- Const
- Ident: BUFFER_SIZE
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "4096"
    suffix: ~
- Newline
- Enum
- Ident: SocketType
- Newline
- Indent
- Ident: STREAM
- Newline
- Ident: DATAGRAM
- Newline
- Ident: RAW
- Newline
- Dedent
- Enum
- Ident: Protocol
- Newline
- Indent
- Ident: TCP
- Newline
- Ident: UDP
- Newline
- Ident: ICMP
- Newline
- Dedent
- Enum
- Ident: AddressFamily
- Newline
- Indent
- Ident: IPV4
- Newline
- Ident: IPV6
- Newline
- Ident: UNIX
- Newline
- Dedent
- Union
- Ident: SocketError
- Newline
- Indent
- Ident: connection_refused
- Colon
- OkLiteral
- Newline
- Ident: timeout
- Colon
- OkLiteral
- Newline
- Ident: reset
- Colon
- OkLiteral
- Newline
- Ident: would_block
- Colon
- OkLiteral
- Newline
- Ident: invalid_address
- Colon
- LBracket
- U8
- RBracket
- Newline
- Ident: system_error
- Colon
- I32
- Newline
- Dedent
- Union
- Ident: SocketResult
- LBracket
- Ident: T
- RBracket
- Newline
- Indent
- OkLiteral
- Colon
- Ident: T
- Newline
- Ident: err
- Colon
- Ident: SocketError
- Newline
- Dedent
- Struct
- Ident: IpAddress
- Newline
- Indent
- Ident: octets
- Colon
- LBracket
- U8
- RBracket
- Newline
- Ident: family
- Colon
- Ident: AddressFamily
- Newline
- Dedent
- Struct
- Ident: SocketAddress
- Newline
- Indent
- Ident: ip
- Colon
- Ident: IpAddress
- Newline
- Ident: port
- Colon
- U16
- Newline
- Dedent
- Export
- Struct
- Ident: Socket
- Newline
- Indent
- Ident: fd
- Colon
- I32
- Newline
- Ident: address_family
- Colon
- Ident: AddressFamily
- Newline
- Ident: socket_type
- Colon
- Ident: SocketType
- Newline
- Ident: protocol
- Colon
- Ident: Protocol
- Newline
- Ident: blocking
- Colon
- Bool
- Newline
- Dedent
- Export
- Struct
- Ident: TcpListener
- Newline
- Indent
- Ident: socket
- Colon
- Ident: Socket
- Newline
- Ident: address
- Colon
- Ident: SocketAddress
- Newline
- Ident: backlog
- Colon
- USize
- Newline
- Dedent
- Export
- Struct
- Ident: TcpStream
- Newline
- Indent
- Ident: socket
- Colon
- Ident: Socket
- Newline
- Ident: peer_address
- Colon
- Ident: SocketAddress
- Newline
- Ident: local_address
- Colon
- Ident: SocketAddress
- Newline
- Dedent
- Export
- Struct
- Ident: TcpServer
- Newline
- Indent
- Ident: listener
- Colon
- Ident: TcpListener
- Newline
- Ident: connections
- Colon
- LBracket
- Ident: TcpConnection
- RBracket
- Newline
- Ident: max_connections
- Colon
- USize
- Newline
- Ident: running
- Colon
- Bool
- Newline
- Dedent
- Struct
- Ident: TcpConnection
- Newline
- Indent
- Ident: stream
- Colon
- Ident: TcpStream
- Newline
- Ident: buffer
- Colon
- LBracket
- U8
- RBracket
- Newline
- Ident: bytes_read
- Colon
- USize
- Newline
- Ident: last_activity
- Colon
- U64
- Newline
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: new
- LParen
- Ident: family
- Colon
- Ident: AddressFamily
- Comma
- Ident: socket_type
- Colon
- Ident: SocketType
- Comma
- Ident: protocol
- Colon
- Ident: Protocol
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- Ident: Socket
- RBracket
- Newline
- Indent
- Let
- Ident: fd
- Eq
- Ident: socket_create
- LParen
- Ident: family
- Comma
- Ident: socket_type
- Comma
- Ident: protocol
- RParen
- Newline
- Newline
- If
- Ident: fd
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- Ident: Socket
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: fd
- RParen
- RParen
- Newline
- Newline
- Dedent
- Let
- Ident: socket
- Eq
- Ident: Socket
- LParen
- Newline
- Indent
- Ident: fd
- Colon
- Ident: fd
- Comma
- Newline
- Ident: address_family
- Colon
- Ident: family
- Comma
- Newline
- Ident: socket_type
- Colon
- Ident: socket_type
- Comma
- Newline
- Ident: protocol
- Colon
- Ident: protocol
- Comma
- Newline
- Ident: blocking
- Colon
- "True"
- Newline
- Dedent
- RParen
- Newline
- Newline
- Return
- Ident: SocketResult
- LBracket
- Ident: Socket
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: socket
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: bind
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Newline
- Indent
- Let
- Ident: result
- Eq
- Ident: socket_bind
- LParen
- SelfLower
- Dot
- Ident: fd
- Comma
- Ident: address
- RParen
- Newline
- Newline
- If
- Ident: result
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: result
- RParen
- RParen
- Newline
- Newline
- Dedent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- OkLiteral
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: listen
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: backlog
- Colon
- USize
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Newline
- Indent
- Let
- Ident: result
- Eq
- Ident: socket_listen
- LParen
- SelfLower
- Dot
- Ident: fd
- Comma
- Ident: backlog
- As
- I32
- RParen
- Newline
- Newline
- If
- Ident: result
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: result
- RParen
- RParen
- Newline
- Newline
- Dedent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- OkLiteral
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: accept
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- Ident: Socket
- RBracket
- Newline
- Indent
- Let
- Ident: fd
- Eq
- Ident: socket_accept
- LParen
- SelfLower
- Dot
- Ident: fd
- RParen
- Newline
- Newline
- If
- Ident: fd
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- Ident: Socket
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: fd
- RParen
- RParen
- Newline
- Newline
- Dedent
- Let
- Ident: socket
- Eq
- Ident: Socket
- LParen
- Newline
- Indent
- Ident: fd
- Colon
- Ident: fd
- Comma
- Newline
- Ident: address_family
- Colon
- SelfLower
- Dot
- Ident: address_family
- Comma
- Newline
- Ident: socket_type
- Colon
- SelfLower
- Dot
- Ident: socket_type
- Comma
- Newline
- Ident: protocol
- Colon
- SelfLower
- Dot
- Ident: protocol
- Comma
- Newline
- Ident: blocking
- Colon
- SelfLower
- Dot
- Ident: blocking
- Newline
- Dedent
- RParen
- Newline
- Newline
- Return
- Ident: SocketResult
- LBracket
- Ident: Socket
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: socket
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: connect
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Newline
- Indent
- Let
- Ident: result
- Eq
- Ident: socket_connect
- LParen
- SelfLower
- Dot
- Ident: fd
- Comma
- Ident: address
- RParen
- Newline
- Newline
- If
- Ident: result
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: connection_refused
- LParen
- OkLiteral
- RParen
- RParen
- Newline
- Newline
- Dedent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- OkLiteral
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: send
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: data
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Newline
- Indent
- Let
- Ident: bytes_sent
- Eq
- Ident: socket_send
- LParen
- SelfLower
- Dot
- Ident: fd
- Comma
- And
- Ident: data
- LBracket
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- RBracket
- Comma
- Ident: data
- Dot
- Ident: len
- RParen
- Newline
- Newline
- If
- Ident: bytes_sent
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: bytes_sent
- RParen
- RParen
- Newline
- Newline
- Dedent
- Return
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: bytes_sent
- As
- USize
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: recv
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: buffer
- Colon
- Star
- Mut
- U8
- Comma
- Ident: size
- Colon
- USize
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Newline
- Indent
- Let
- Ident: bytes_read
- Eq
- Ident: socket_recv
- LParen
- SelfLower
- Dot
- Ident: fd
- Comma
- Ident: buffer
- Comma
- Ident: size
- RParen
- Newline
- Newline
- If
- Ident: bytes_read
- EqEq
- Ident: SOCKET_ERROR
- Newline
- Indent
- Return
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: bytes_read
- RParen
- RParen
- Newline
- Newline
- Dedent
- Return
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: bytes_read
- As
- USize
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: set_blocking
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: blocking
- Colon
- Bool
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Newline
- Indent
- Let
- Ident: result
- Eq
- Ident: socket_set_blocking
- LParen
- SelfLower
- Dot
- Ident: fd
- Comma
- Ident: blocking
- RParen
- Newline
- Newline
- If
- Ident: result
- EqEq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Indent
- SelfLower
- Dot
- Ident: blocking
- Eq
- Ident: blocking
- Newline
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- OkLiteral
- RParen
- Newline
- Newline
- Dedent
- Return
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Colon
- Colon
- Ident: err
- LParen
- Ident: SocketError
- Colon
- Colon
- Ident: system_error
- LParen
- Ident: result
- RParen
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: Socket
- Colon
- Colon
- Ident: close
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- If
- SelfLower
- Dot
- Ident: fd
- Ne
- Ident: SOCKET_ERROR
- Newline
- Indent
- Ident: socket_close
- LParen
- SelfLower
- Dot
- Ident: fd
- RParen
- Newline
- SelfLower
- Dot
- Ident: fd
- Eq
- Ident: SOCKET_ERROR
- Newline
- Dedent
- Pass
- Newline
- Newline
- Dedent
- Func
- Bang
- Ident: TcpListener
- Colon
- Colon
- Ident: bind
- LParen
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- Ident: TcpListener
- RBracket
- Newline
- Indent
- Let
- Ident: socket_result
- Eq
- Ident: Socket
- Colon
- Colon
- Ident: new
- LParen
- Ident: AddressFamily
- Colon
- Colon
- Ident: IPV4
- Comma
- Ident: SocketType
- Colon
- Colon
- Ident: STREAM
- Comma
- Ident: Protocol
- Colon
- Colon
- Ident: TCP
- RParen
- Newline
- Let
- Ident: socket
- Eq
- Ident: socket_result
- Dot
- OkLiteral
- Newline
- Newline
- Ident: socket
- Dot
- Ident: bind
- LParen
- Ident: address
- RParen
- Newline
- Ident: socket
- Dot
- Ident: listen
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "128"
    suffix: ~
- RParen
- Newline
- Newline
- Let
- Ident: listener
- Eq
- Ident: TcpListener
- LParen
- Newline
- Indent
- Ident: socket
- Colon
- Ident: socket
- Comma
- Newline
- Ident: address
- Colon
- Ident: address
- Comma
- Newline
- Ident: backlog
- Colon
- IntegerLiteral:
    base: Decimal
    digits: "128"
    suffix: ~
- Newline
- Dedent
- RParen
- Newline
- Newline
- Return
- Ident: SocketResult
- LBracket
- Ident: TcpListener
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: listener
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: TcpListener
- Colon
- Colon
- Ident: accept
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- Ident: TcpStream
- RBracket
- Newline
- Indent
- Let
- Ident: socket_result
- Eq
- SelfLower
- Dot
- Ident: socket
- Dot
- Ident: accept
- LParen
- RParen
- Newline
- Let
- Ident: socket
- Eq
- Ident: socket_result
- Dot
- OkLiteral
- Newline
- Newline
- Let
- Ident: peer_addr
- Eq
- Ident: socket_get_peer_address
- LParen
- Ident: socket
- Dot
- Ident: fd
- RParen
- Newline
- Let
- Ident: local_addr
- Eq
- SelfLower
- Dot
- Ident: address
- Newline
- Newline
- Let
- Ident: stream
- Eq
- Ident: TcpStream
- LParen
- Newline
- Indent
- Ident: socket
- Colon
- Ident: socket
- Comma
- Newline
- Ident: peer_address
- Colon
- Ident: peer_addr
- Comma
- Newline
- Ident: local_address
- Colon
- Ident: local_addr
- Newline
- Dedent
- RParen
- Newline
- Newline
- Return
- Ident: SocketResult
- LBracket
- Ident: TcpStream
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: stream
- RParen
- Newline
- Dedent
- Func
- Ident: TcpListener
- Colon
- Colon
- Ident: local_address
- LParen
- Star
- SelfLower
- RParen
- Arrow
- Ident: SocketAddress
- Newline
- Indent
- Return
- SelfLower
- Dot
- Ident: address
- Newline
- Dedent
- Func
- Bang
- Ident: TcpListener
- Colon
- Colon
- Ident: set_nonblocking
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- OkLiteral
- RBracket
- Newline
- Indent
- Return
- SelfLower
- Dot
- Ident: socket
- Dot
- Ident: set_blocking
- LParen
- "False"
- RParen
- Newline
- Newline
- Dedent
- Func
- Bang
- Ident: TcpStream
- Colon
- Colon
- Ident: connect
- LParen
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- Ident: TcpStream
- RBracket
- Newline
- Indent
- Let
- Ident: socket_result
- Eq
- Ident: Socket
- Colon
- Colon
- Ident: new
- LParen
- Ident: AddressFamily
- Colon
- Colon
- Ident: IPV4
- Comma
- Ident: SocketType
- Colon
- Colon
- Ident: STREAM
- Comma
- Ident: Protocol
- Colon
- Colon
- Ident: TCP
- RParen
- Newline
- Let
- Ident: socket
- Eq
- Ident: socket_result
- Dot
- OkLiteral
- Newline
- Newline
- Ident: socket
- Dot
- Ident: connect
- LParen
- Ident: address
- RParen
- Newline
- Newline
- Let
- Ident: local_addr
- Eq
- Ident: socket_get_local_address
- LParen
- Ident: socket
- Dot
- Ident: fd
- RParen
- Newline
- Newline
- Let
- Ident: stream
- Eq
- Ident: TcpStream
- LParen
- Newline
- Indent
- Ident: socket
- Colon
- Ident: socket
- Comma
- Newline
- Ident: peer_address
- Colon
- Ident: address
- Comma
- Newline
- Ident: local_address
- Colon
- Ident: local_addr
- Newline
- Dedent
- RParen
- Newline
- Newline
- Return
- Ident: SocketResult
- LBracket
- Ident: TcpStream
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: stream
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: TcpStream
- Colon
- Colon
- Ident: read
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: buffer
- Colon
- Star
- Mut
- U8
- Comma
- Ident: size
- Colon
- USize
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Newline
- Indent
- Return
- SelfLower
- Dot
- Ident: socket
- Dot
- Ident: recv
- LParen
- Ident: buffer
- Comma
- Ident: size
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: TcpStream
- Colon
- Colon
- Ident: write
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: data
- Colon
- LBracket
- U8
- RBracket
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- USize
- RBracket
- Newline
- Indent
- Return
- SelfLower
- Dot
- Ident: socket
- Dot
- Ident: send
- LParen
- Ident: data
- RParen
- Newline
- Dedent
- Func
- Ident: TcpStream
- Colon
- Colon
- Ident: peer_address
- LParen
- Star
- SelfLower
- RParen
- Arrow
- Ident: SocketAddress
- Newline
- Indent
- Return
- SelfLower
- Dot
- Ident: peer_address
- Newline
- Dedent
- Func
- Ident: TcpStream
- Colon
- Colon
- Ident: local_address
- LParen
- Star
- SelfLower
- RParen
- Arrow
- Ident: SocketAddress
- Newline
- Indent
- Return
- SelfLower
- Dot
- Ident: local_address
- Newline
- Dedent
- Func
- Bang
- Ident: TcpStream
- Colon
- Colon
- Ident: shutdown
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- SelfLower
- Dot
- Ident: socket
- Dot
- Ident: close
- LParen
- RParen
- Newline
- Pass
- Newline
- Newline
- Dedent
- Func
- Bang
- Ident: TcpServer
- Colon
- Colon
- Ident: new
- LParen
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- Ident: SocketResult
- LBracket
- Ident: TcpServer
- RBracket
- Newline
- Indent
- Let
- Ident: listener_result
- Eq
- Ident: TcpListener
- Colon
- Colon
- Ident: bind
- LParen
- Ident: address
- RParen
- Newline
- Let
- Ident: listener
- Eq
- Ident: listener_result
- Dot
- OkLiteral
- Newline
- Newline
- Let
- Ident: server
- Eq
- Ident: TcpServer
- LParen
- Newline
- Indent
- Ident: listener
- Colon
- Ident: listener
- Comma
- Newline
- Ident: connections
- Colon
- LBracket
- RBracket
- Comma
- Newline
- Ident: max_connections
- Colon
- Ident: MAX_CONNECTIONS
- Comma
- Newline
- Ident: running
- Colon
- "False"
- Newline
- Dedent
- RParen
- Newline
- Newline
- Return
- Ident: SocketResult
- LBracket
- Ident: TcpServer
- RBracket
- Colon
- Colon
- OkLiteral
- LParen
- Ident: server
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: TcpServer
- Colon
- Colon
- Ident: run
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- SelfLower
- Dot
- Ident: running
- Eq
- "True"
- Newline
- SelfLower
- Dot
- Ident: listener
- Dot
- Ident: set_nonblocking
- LParen
- RParen
- Newline
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "1000000"
    suffix: ~
- RParen
- Newline
- Indent
- If
- Bang
- SelfLower
- Dot
- Ident: running
- Newline
- Indent
- Break
- Newline
- Newline
- Dedent
- SelfLower
- Dot
- Ident: accept_connections
- LParen
- RParen
- Newline
- SelfLower
- Dot
- Ident: handle_connections
- LParen
- RParen
- Newline
- Ident: sleep_ms
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "10"
    suffix: ~
- RParen
- Newline
- Newline
- Dedent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: TcpServer
- Colon
- Colon
- Ident: accept_connections
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "10"
    suffix: ~
- RParen
- Newline
- Indent
- If
- SelfLower
- Dot
- Ident: connections
- Dot
- Ident: len
- Ge
- SelfLower
- Dot
- Ident: max_connections
- Newline
- Indent
- Break
- Newline
- Newline
- Dedent
- Let
- Ident: stream_result
- Eq
- SelfLower
- Dot
- Ident: listener
- Dot
- Ident: accept
- LParen
- RParen
- Newline
- Newline
- Let
- Ident: conn
- Eq
- Ident: TcpConnection
- LParen
- Newline
- Indent
- Ident: stream
- Colon
- Ident: stream_result
- Dot
- OkLiteral
- Comma
- Newline
- Ident: buffer
- Colon
- Ident: allocate_buffer
- LParen
- Ident: BUFFER_SIZE
- RParen
- Comma
- Newline
- Ident: bytes_read
- Colon
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- Newline
- Ident: last_activity
- Colon
- Ident: get_time_ms
- LParen
- RParen
- Newline
- Dedent
- RParen
- Newline
- Newline
- SelfLower
- Dot
- Ident: connections
- Dot
- Ident: push
- LParen
- Ident: conn
- RParen
- Newline
- Newline
- Dedent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: TcpServer
- Colon
- Colon
- Ident: handle_connections
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- Mut
- Ident: i
- Colon
- USize
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Newline
- For
- Ident: idx
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- SelfLower
- Dot
- Ident: connections
- Dot
- Ident: len
- RParen
- Newline
- Indent
- Let
- Ident: conn
- Eq
- And
- Mut
- SelfLower
- Dot
- Ident: connections
- LBracket
- Ident: i
- RBracket
- Newline
- Newline
- Let
- Ident: bytes_result
- Eq
- Ident: conn
- Dot
- Ident: stream
- Dot
- Ident: read
- LParen
- And
- Mut
- Ident: conn
- Dot
- Ident: buffer
- LBracket
- Ident: conn
- Dot
- Ident: bytes_read
- RBracket
- Comma
- Ident: BUFFER_SIZE
- Minus
- Ident: conn
- Dot
- Ident: bytes_read
- RParen
- Newline
- Newline
- If
- Ident: bytes_result
- Dot
- OkLiteral
- Gt
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Indent
- Ident: conn
- Dot
- Ident: bytes_read
- Eq
- Ident: conn
- Dot
- Ident: bytes_read
- Plus
- Ident: bytes_result
- Dot
- OkLiteral
- Newline
- Ident: conn
- Dot
- Ident: last_activity
- Eq
- Ident: get_time_ms
- LParen
- RParen
- Newline
- Newline
- If
- Ident: conn
- Dot
- Ident: bytes_read
- Ge
- Ident: BUFFER_SIZE
- Newline
- Indent
- SelfLower
- Dot
- Ident: process_request
- LParen
- Ident: conn
- RParen
- Newline
- Ident: conn
- Dot
- Ident: bytes_read
- Eq
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Newline
- Newline
- Dedent
- Dedent
- Let
- Ident: now
- Eq
- Ident: get_time_ms
- LParen
- RParen
- Newline
- If
- Ident: now
- Minus
- Ident: conn
- Dot
- Ident: last_activity
- Gt
- IntegerLiteral:
    base: Decimal
    digits: "30000"
    suffix: ~
- Newline
- Indent
- Ident: conn
- Dot
- Ident: stream
- Dot
- Ident: shutdown
- LParen
- RParen
- Newline
- SelfLower
- Dot
- Ident: connections
- Dot
- Ident: remove
- LParen
- Ident: i
- RParen
- Newline
- Dedent
- Else
- Newline
- Indent
- Ident: i
- Eq
- Ident: i
- Plus
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- Newline
- Newline
- Dedent
- Dedent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: TcpServer
- Colon
- Colon
- Ident: process_request
- LParen
- Star
- Mut
- SelfLower
- Comma
- Ident: conn
- Colon
- Star
- Mut
- Ident: TcpConnection
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- Let
- Ident: response
- Eq
- StringLiteral: "HTTP/1.1 200 OK\r\nContent-Length: 13\r\n\r\nHello, World!"
- Newline
- Ident: conn
- Dot
- Ident: stream
- Dot
- Ident: write
- LParen
- Ident: response
- Dot
- Ident: as_bytes
- LParen
- RParen
- RParen
- Newline
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: TcpServer
- Colon
- Colon
- Ident: shutdown
- LParen
- Star
- Mut
- SelfLower
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- SelfLower
- Dot
- Ident: running
- Eq
- "False"
- Newline
- Newline
- For
- Ident: i
- In
- Ident: range
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- SelfLower
- Dot
- Ident: connections
- Dot
- Ident: len
- RParen
- Newline
- Indent
- Let
- Ident: conn
- Eq
- And
- Mut
- SelfLower
- Dot
- Ident: connections
- LBracket
- Ident: i
- RBracket
- Newline
- Ident: conn
- Dot
- Ident: stream
- Dot
- Ident: shutdown
- LParen
- RParen
- Newline
- Newline
- Dedent
- SelfLower
- Dot
- Ident: listener
- Dot
- Ident: socket
- Dot
- Ident: close
- LParen
- RParen
- Newline
- Pass
- Newline
- Newline
- Dedent
- Func
- Bang
- Ident: IpAddress
- Colon
- Colon
- Ident: v4
- LParen
- Ident: a
- Colon
- U8
- Comma
- Ident: b
- Colon
- U8
- Comma
- Ident: c
- Colon
- U8
- Comma
- Ident: d
- Colon
- U8
- RParen
- Arrow
- Ident: IpAddress
- Newline
- Indent
- Return
- Ident: IpAddress
- LParen
- Newline
- Indent
- Ident: octets
- Colon
- LBracket
- Ident: a
- Comma
- Ident: b
- Comma
- Ident: c
- Comma
- Ident: d
- RBracket
- Comma
- Newline
- Ident: family
- Colon
- Ident: AddressFamily
- Colon
- Colon
- Ident: IPV4
- Newline
- Dedent
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: IpAddress
- Colon
- Colon
- Ident: localhost
- LParen
- RParen
- Arrow
- Ident: IpAddress
- Newline
- Indent
- Return
- Ident: IpAddress
- Colon
- Colon
- Ident: v4
- LParen
- IntegerLiteral:
    base: Decimal
    digits: "127"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "0"
    suffix: ~
- Comma
- IntegerLiteral:
    base: Decimal
    digits: "1"
    suffix: ~
- RParen
- Newline
- Dedent
- Func
- Bang
- Ident: SocketAddress
- Colon
- Colon
- Ident: new
- LParen
- Ident: ip
- Colon
- Ident: IpAddress
- Comma
- Ident: port
- Colon
- U16
- RParen
- Arrow
- Ident: SocketAddress
- Newline
- Indent
- Return
- Ident: SocketAddress
- LParen
- Ident: ip
- Colon
- Ident: ip
- Comma
- Ident: port
- Colon
- Ident: port
- RParen
- Newline
- Newline
- Dedent
- Func
- Bang
- Ident: socket_create
- LParen
- Ident: family
- Colon
- Ident: AddressFamily
- Comma
- Ident: socket_type
- Colon
- Ident: SocketType
- Comma
- Ident: protocol
- Colon
- Ident: Protocol
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_bind
- LParen
- Ident: fd
- Colon
- I32
- Comma
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_listen
- LParen
- Ident: fd
- Colon
- I32
- Comma
- Ident: backlog
- Colon
- I32
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_accept
- LParen
- Ident: fd
- Colon
- I32
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_connect
- LParen
- Ident: fd
- Colon
- I32
- Comma
- Ident: address
- Colon
- Ident: SocketAddress
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_send
- LParen
- Ident: fd
- Colon
- I32
- Comma
- Ident: data
- Colon
- Star
- U8
- Comma
- Ident: size
- Colon
- USize
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_recv
- LParen
- Ident: fd
- Colon
- I32
- Comma
- Ident: buffer
- Colon
- Star
- Mut
- U8
- Comma
- Ident: size
- Colon
- USize
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_set_blocking
- LParen
- Ident: fd
- Colon
- I32
- Comma
- Ident: blocking
- Colon
- Bool
- RParen
- Arrow
- I32
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: socket_close
- LParen
- Ident: fd
- Colon
- I32
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Ident: socket_get_peer_address
- LParen
- Ident: fd
- Colon
- I32
- RParen
- Arrow
- Ident: SocketAddress
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Ident: socket_get_local_address
- LParen
- Ident: fd
- Colon
- I32
- RParen
- Arrow
- Ident: SocketAddress
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: allocate_buffer
- LParen
- Ident: size
- Colon
- USize
- RParen
- Arrow
- LBracket
- U8
- RBracket
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Ident: get_time_ms
- LParen
- RParen
- Arrow
- U64
- Newline
- Indent
- Pass
- Newline
- Dedent
- Func
- Bang
- Ident: sleep_ms
- LParen
- Ident: ms
- Colon
- U32
- RParen
- Arrow
- OkLiteral
- Newline
- Indent
- Pass
- Newline
- Dedent
